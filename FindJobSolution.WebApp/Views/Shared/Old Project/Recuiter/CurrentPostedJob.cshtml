@model IEnumerable<Website_Tuyển_dụng.Models.CongViecDangTuyen>
@using Microsoft.AspNetCore.Http;
@inject IHttpContextAccessor HttpContextAccessor

@{
    ViewData["Title"] = "CurrentPostedJob";
    Layout = "~/Views/Shared/_Layout3.cshtml";
}
<!doctype html>
<html lang="en">
<head>
    <title>Sidebar 04</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../sidebar/css/style.css">
    <link rel="stylesheet" href="https://unpkg.com/swiper@8/swiper-bundle.min.css" />

    <style>
        html,
        body {
            position: relative;
            height: 100%;
        }

        body {
            background: #eee;
            font-family: Helvetica Neue, Helvetica, Arial, sans-serif;
            font-size: 14px;
            color: #000;
            margin: 0;
            padding: 0;
        }

        .swiper {
            width: 100%;
            height: 100%;
        }

        .swiper-slide {
            text-align: center;
            font-size: 18px;
            background: #fff;
            /* Center slide text vertically */
            display: -webkit-box;
            display: -ms-flexbox;
            display: -webkit-flex;
            display: flex;
            -webkit-box-pack: center;
            -ms-flex-pack: center;
            -webkit-justify-content: center;
            justify-content: center;
            -webkit-box-align: center;
            -ms-flex-align: center;
            -webkit-align-items: center;
            align-items: center;
        }

            .swiper-slide img {
                display: block;
                width: 100%;
                height: 100%;
                object-fit: cover;
            }
    </style>

</head>
<body style="overflow-x: hidden">
    <div class="wrapper d-flex align-items-stretch">
        <nav id="sidebar" class="order-last img active" style="background-image: url(../sidebar/images/bg_1.jpg); max-height:850px; overflow: hidden ;position:sticky; top:0rem">
            <div class="custom-menu">
            </div>
            @if (HttpContextAccessor.HttpContext.Session.GetString("Email1") != null)
            {
                var email = HttpContextAccessor.HttpContext.Session.GetString("Email1");
                QLTDContext context = new QLTDContext();
                TaiKhoanNhaTuyenDung tkntd = context.TaiKhoanNhaTuyenDungs.SingleOrDefault(p => p.Email == email);
                <div class="">
                    <h1><span><img src="~/assets/img/icon/profile-icon-white-22.jpg" style="height: 30px; margin-left:24px"></span><a href="index.html" class="logo" style="display:inline-grid ;padding:10px 30px"> @tkntd.HoTen<span>@tkntd.Email</span> </a></h1>
                    <ul class="list-unstyled components mb-5">
                        <li class="active">
                            <a href="@Url.Action("UserProfile", "UserEmp")"><span class="fa fa-user mr-3"></span>Quản lý tài khoản</a>
                        </li>
                        <li>
                            <a href="@Url.Action("UserCompanyEdit", "UserEmp")"><span class="fa fa-building mr-3" aria-hidden="true"></span>Thông tin công ty</a>
                        </li>
                        <li>
                            <a href="@Url.Action("Logout2", "Home")"><span class="fa fa-times mr-3"></span>Thoát</a>
                        </li>
                    </ul>
                </div>
            }
            else
            {
                <div class="">
                    <div class="sidebar-menu__header"></div>
                    <div class="sidebar-menu__body--notlogin" style="min-height:705px">
                        <p style="margin-top: 1rem!important ; color: black">Đăng nhập để tuyển dụng và nhiều thứ khác nữa</p>
                        <a href="@Url.Action("LoginEmployer", "Home")" class="btn-page--orj" style="color:white">Đăng nhập</a>
                    </div>
                    <div class="sidebar-menu__footer" style="text-align:center">
                        <a href="@Url.Action("RegisterEmployer", "Home")" class="clicklink">Tôi không có tài khoản</a>
                    </div>
                </div>
            }
        </nav>

        <!-- Page Content  -->
        <div id="content" style="z-index:1">

            <div style="width: 100%; overflow-x: hidden;">
                <div style="min-height:912px">
                    <div style="padding:25px 43px 50px">
                        <div style=" margin-right: -15px; margin-left: -15px;">
                            <div style=" margin-top: 0; width: 350px; display: flex;">
                                <form method="get" asp-action="CurrentPostedJob">
                                    <div class="input-form">
                                        <input type="search" placeholder="Chức danh" value="@ViewData["GetJobDetails"]" name="Empsearch">
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div style=" margin-right: -15px; margin-left: -15px;">
                            <div class="col-sm-12">
                                <div style="clear: both; margin-bottom: 25px; margin-top: 0; padding: 0;">
                                    <div style="border: none; padding: 0;">
                                        <table class="table">                                          
                                            <thead>
                                                <tr>
                                                    <th>
                                                        Chức danh
                                                    </th>                                                
                                                    <th>
                                                        Số người ứng tuyển công việc
                                                    </th>
                                                    <th></th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @foreach (var item in Model)
                                                {
                                                    QLTDContext context = new QLTDContext();
                                                    int dem = context.XinViecs.Count(p => p.MaNhaTuyenDung == item.Id);
                                                    <tr>
                                                        <td>
                                                            <a href="@Url.Action("Info", new { id=item.Id }) ">@Html.DisplayFor(modelItem => item.ChucDanh)</a>                                                          
                                                        </td>
                                                        <td>
                                                            @dem
                                                        </td>
                                                    </tr>
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="../sidebar/js/jquery.min.js"></script>
    <script src="../sidebar/js/popper.js"></script>
    <script src="../sidebar/js/bootstrap.min.js"></script>
    <script src="../sidebar/js/main.js"></script>
</body>
</html>


